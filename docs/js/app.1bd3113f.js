webpackJsonp([1],{0:function(e,t,r){e.exports=r("NHnr")},"7zck":function(e,t){},GGic:function(e,t,r){e.exports=r.p+"img/github.56fd963a.svg"},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=r("/5sW"),a=r("3EgV"),s=r.n(a),c=(r("gJtD"),r("7zck"),r("EuXz"),r("VjuZ"),r("R+RE")),i=r.n(c),l={name:"Index",data:function(){return{format:"ass",source:"",filename:"",snackbar:{show:!1,text:""},dialog:!1}},computed:{result:function(){var e=this.format,t=this.source;return"srt"===e?t.replace(/(\d+:?){3},\d+ --> (\d+:?){3},\d?/g,"").replace(/\d+\s*\n/g,"").replace(/{\\an.*}/g,"").replace(/{\\pos.*}/g,""):"ass"===e?t.replace(/[^]*\[Events\]\s*/,"").replace(/Format:.*\s*/,"").replace(/Dialogue.*,,(.*p0})?/g,"\n").replace(/{.*?}/g,"").replace(/\\N/g,"\n").replace(/(\s*\n){3,}/g,"\n\n"):t}},mounted:function(){var e=this;this.$nextTick(function(){new i.a,e.$refs.source.addEventListener("scroll",e.scrollSync),e.$refs.result.addEventListener("scroll",e.scrollSync)})},methods:{switchFormat:function(){this.format="ass"===this.format?"srt":"ass"},dropFile:function(e){var t=e.dataTransfer.files[0],r=new FileReader;r.onload=this.getSourceFromFile,r.readAsText(t),this.format=t.name.replace(/.*\./,""),this.filename=t.name.replace(".".concat(this.format),".txt"),this.snackbar={show:!0,text:"字幕导入成功"}},getSourceFromFile:function(e){this.source=e.target.result},downFile:function(){if(this.filename){var e=document.createElement("a");e.download=this.filename,e.style.display="none";var t=new Blob([this.result.replace(/\r?\n/g,"\r\n")]);e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),document.body.removeChild(e),this.dialog=!1,this.snackbar={show:!0,text:"文本导出成功"}}else this.snackbar={show:!0,text:"请输入文件名"}},scrollSync:function(e){var t=this;clearTimeout(o);var r=e.target,n=r.scrollTop,a=r.scrollHeight,s=n/a,c=this.$refs,i=c.source,l=c.result,u=e.target===i?l:i;u.removeEventListener("scroll",this.scrollSync),u.scrollTop=u.scrollHeight*s,o=setTimeout(function(){u.addEventListener("scroll",t.scrollSync)},300)}}},u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("v-toolbar",{attrs:{dark:"",color:"primary"}},[o("v-toolbar-title",{staticClass:"white--text"},[e._v("字幕转文本工具")]),o("v-spacer"),o("v-btn",{attrs:{icon:"",dark:"",disabled:""}},[e._v(e._s(e.format))]),o("v-btn",{attrs:{icon:"",dark:""},on:{click:e.switchFormat}},[o("v-icon",[e._v("swap_horiz")])],1),o("a",{attrs:{href:"https://github.com/F-loat/caption2text",target:"_blank"}},[o("v-btn",{attrs:{icon:"",dark:""},on:{click:e.switchFormat}},[o("img",{attrs:{src:r("GGic")}})])],1)],1),o("div",{staticClass:"main",on:{drop:function(t){return t.preventDefault(),e.dropFile(t)}}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.source,expression:"source"}],ref:"source",staticClass:"source",attrs:{placeholder:"支持文件拖入"},domProps:{value:e.source},on:{input:function(t){t.target.composing||(e.source=t.target.value)}}}),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result,expression:"result"}],ref:"result",staticClass:"result",attrs:{placeholder:"支持文本导出"},domProps:{value:e.result},on:{input:function(t){t.target.composing||(e.result=t.target.value)}}})]),o("v-btn",{attrs:{color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[o("v-icon",[e._v("get_app")])],1),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-card-title",[e._v("导出文本")]),o("v-card-text",[o("v-text-field",{attrs:{label:"文件名"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){t.stopPropagation(),e.dialog=!1}}},[e._v("取消")]),o("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){return t.stopPropagation(),e.downFile(t)}}},[e._v("下载")])],1)],1)],1),o("v-snackbar",{attrs:{timeout:2e3,top:""},model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[e._v("\n    "+e._s(e.snackbar.text)+"\n    "),o("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){e.snackbar.show=!1}}},[e._v("Close")])],1)],1)},d=[],p=r("XyMi");function f(e){r("v3Jq")}var v=!1,m=f,g="data-v-38266516",h=null,b=Object(p["a"])(l,u,d,v,m,g,h),k=b.exports,x={name:"app",components:{Index:k}},w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Index")},_=[],y=!1,F=null,E=null,C=null,T=Object(p["a"])(x,w,_,y,F,E,C),$=T.exports,j=r("ydGU");Object(j["a"])("".concat("/caption2text/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["a"].config.productionTip=!1,n["a"].use(s.a),new n["a"]({render:function(e){return e($)}}).$mount("#app")},gJtD:function(e,t){},v3Jq:function(e,t){}},[0]);